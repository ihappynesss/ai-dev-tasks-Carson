# Production Environment Configuration
# For n8n Cloud deployment with full queue mode

# Environment
NODE_ENV=production
ENVIRONMENT=production

# PostgreSQL Database (n8n Cloud managed)
DB_TYPE=postgresdb
DB_POSTGRESDB_HOST=${PRODUCTION_DB_HOST}
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_DATABASE=${PRODUCTION_DB_NAME}
DB_POSTGRESDB_USER=${PRODUCTION_DB_USER}
DB_POSTGRESDB_PASSWORD=${PRODUCTION_DB_PASSWORD}
DB_POSTGRESDB_SSL=true

# Redis Configuration (managed Redis service)
REDIS_HOST=${PRODUCTION_REDIS_HOST}
REDIS_PORT=6379
REDIS_PASSWORD=${PRODUCTION_REDIS_PASSWORD}
REDIS_DB_QUEUE=0
REDIS_DB_CACHE=1
REDIS_DB_RATELIMIT=2
REDIS_DB_FAILED=3
REDIS_TLS=true

# n8n Authentication (strong credentials - use secrets manager)
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=${PRODUCTION_N8N_USER}
N8N_BASIC_AUTH_PASSWORD=${PRODUCTION_N8N_PASSWORD}

# n8n Configuration
N8N_HOST=${PRODUCTION_N8N_HOST}
N8N_PORT=443
N8N_PROTOCOL=https
WEBHOOK_URL=https://${PRODUCTION_N8N_HOST}/
N8N_ENCRYPTION_KEY=${PRODUCTION_ENCRYPTION_KEY}

# Execution Mode (queue mode with multiple workers)
EXECUTIONS_MODE=queue
EXECUTIONS_PROCESS=main
EXECUTIONS_DATA_SAVE_ON_ERROR=all
EXECUTIONS_DATA_SAVE_ON_SUCCESS=all
EXECUTIONS_DATA_SAVE_MANUAL_EXECUTIONS=false
EXECUTIONS_DATA_PRUNE=true
EXECUTIONS_DATA_MAX_AGE=168

# Queue Configuration (full queue mode for 200+ concurrent tickets)
QUEUE_BULL_REDIS_HOST=${PRODUCTION_REDIS_HOST}
QUEUE_BULL_REDIS_PORT=6379
QUEUE_BULL_REDIS_DB=0
QUEUE_BULL_REDIS_PASSWORD=${PRODUCTION_REDIS_PASSWORD}
QUEUE_BULL_REDIS_TLS=true
QUEUE_HEALTH_CHECK_ACTIVE=true
QUEUE_RECOVERY_INTERVAL=60

# Timezone
GENERIC_TIMEZONE=Australia/Sydney

# Logging (info level, structured for monitoring)
N8N_LOG_LEVEL=info
N8N_LOG_OUTPUT=console
N8N_LOG_FILE_SIZE_MAX=16
N8N_LOG_FILE_COUNT_MAX=100

# Features
N8N_PERSONALIZATION_ENABLED=false
N8N_VERSION_NOTIFICATIONS_ENABLED=false
N8N_TEMPLATES_ENABLED=false
N8N_METRICS=true
N8N_DIAGNOSTICS_ENABLED=false

# Security (maximum security)
N8N_SECURE_COOKIE=true
N8N_JWT_AUTH_ACTIVE=false

# Performance (production limits for 200+ concurrent tickets)
EXECUTIONS_TIMEOUT=1800
EXECUTIONS_TIMEOUT_MAX=3600

# Webhook Configuration
WEBHOOK_TUNNEL_URL=https://${PRODUCTION_N8N_HOST}/

# Error Handling
N8N_GRACEFUL_SHUTDOWN_TIMEOUT=30

# External API Credentials (use secrets manager)
# Freshdesk
FRESHDESK_API_KEY=${FRESHDESK_API_KEY}
FRESHDESK_DOMAIN=${FRESHDESK_DOMAIN}

# Supabase
SUPABASE_URL=${SUPABASE_URL}
SUPABASE_SERVICE_KEY=${SUPABASE_SERVICE_KEY}

# Claude AI
CLAUDE_API_KEY=${CLAUDE_API_KEY}

# Perplexity AI
PERPLEXITY_API_KEY=${PERPLEXITY_API_KEY}

# OpenAI
OPENAI_API_KEY=${OPENAI_API_KEY}

# Slack
SLACK_WEBHOOK_URL=${SLACK_WEBHOOK_URL}

# Monitoring
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
SENTRY_DSN=${SENTRY_DSN}

# Target: 99.9% uptime, <500ms response time for webhooks
# Cost target: $0.50-2.00 per ticket
# Automation target: 70-80% after 100 samples
